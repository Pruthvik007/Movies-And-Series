import{j as s,b as h,C as c,r as d,R as b}from"./index-EazMNpFp.js";import{d as v,e as C,M as y}from"./TmdbQueries-53LXov7Y.js";import{u as w,S}from"./ScrollToTopButton-vcn_DNo7.js";import{E}from"./ErrorPage-1Oosi7FL.js";import N from"./PageNotFound-W8GhLWzk.js";const u=({label:o,options:a,value:e,onChange:t})=>s.jsxs("select",{className:"select select-bordered max-w-xs text-center",value:e,onChange:r=>t(r.target.value),children:[s.jsx("option",{value:"",children:o}),a.map(r=>s.jsx("option",{value:r.value,children:r.label},r.value))]}),T=({mediaType:o,value:a,onChange:e})=>{const r=v(o).map(n=>({value:String(n.id),label:n.name}));return s.jsx(u,{label:"Genres",options:r,value:a,onChange:e})},_=({classNames:o="",mediaType:a,params:e,setParams:t})=>s.jsxs("div",{className:`flex flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${o}`,children:[s.jsx(T,{mediaType:a,value:e.with_genres?e.with_genres:"",onChange:r=>t({...e,with_genres:r})}),s.jsx(u,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:e.sort_by?e.sort_by:"",onChange:r=>t({...e,sort_by:r})})]}),U=()=>{const{ref:o,inView:a}=w(),{mediaType:e,category:t}=h(),r=e!==void 0&&t!==void 0&&(e.toUpperCase()==="MOVIES"||e.toUpperCase()==="SHOWS")&&t.toUpperCase()in c.CATEGORIES,[n,p]=d.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:l,error:x,fetchNextPage:i,isFetching:g,isFetchingNextPage:f}=C(e,t,n);return d.useEffect(()=>{a&&i()},[a,i]),r?x?s.jsx(E,{}):s.jsxs("div",{className:"p-3 flex flex-col",children:[s.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${c.CATEGORIES[t.toUpperCase()]} ${e.toUpperCase()}`}),(t==null?void 0:t.toUpperCase())==="DISCOVER"&&s.jsx(_,{classNames:"py-3",mediaType:e,params:n,setParams:p}),s.jsx("div",{className:"flex flex-wrap justify-around bg-neutral gap-0.5",children:l==null?void 0:l.pages.map((m,j)=>s.jsx(b.Fragment,{children:s.jsx(y,{mediaList:m.results,mediaType:e,isLoading:g||f})},j))}),s.jsx("div",{id:"observer",ref:o}),s.jsx(S,{})]}):s.jsx(N,{})};export{U as default};
