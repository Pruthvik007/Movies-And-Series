import{j as s,b as v,r as l,C as c}from"./index-nNhnqEHi.js";import{u as j,S as b}from"./ScrollToTopButton-ceVd-kiX.js";import{d as y,e as w}from"./TmdbQueries-j7MzXjfs.js";import{M as N}from"./MediaList-WXXaJHNo.js";import{E as C}from"./ErrorPage-cCJt4kon.js";import E from"./PageNotFound-teh2KSla.js";const d=({label:a,options:o,value:e,onChange:r})=>s.jsxs("select",{id:a,className:"select select-bordered max-w-xs text-center",value:e,onChange:t=>r(t.target.value),children:[s.jsx("option",{value:"",children:a}),o.map(t=>s.jsx("option",{value:t.value,children:t.label},t.value))]}),S=({mediaType:a,value:o,onChange:e})=>{const t=y(a).map(i=>({value:String(i.id),label:i.name}));return s.jsx(d,{label:"Genres",options:t,value:o,onChange:e})},T=({className:a="",mediaType:o,params:e,setParams:r})=>s.jsxs("div",{className:`flex gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${a}`,children:[s.jsx(S,{mediaType:o,value:e.with_genres?e.with_genres:"",onChange:t=>r({...e,with_genres:t})}),s.jsx(d,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:e.sort_by?e.sort_by:"",onChange:t=>r({...e,sort_by:t})})]}),F=()=>{const{ref:a,inView:o}=j(),{mediaType:e,category:r}=v(),t=e!==void 0&&r!==void 0&&(e==="movies"||e==="shows")&&r in c.CATEGORIES,[i,u]=l.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:n,error:x,fetchNextPage:p,isFetching:g,isFetchingNextPage:f}=w(e,r,i);return l.useEffect(()=>{o&&p()},[o]),t?x?s.jsx(C,{}):s.jsxs("div",{className:"p-3 flex flex-col gap-3",children:[s.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${c.CATEGORIES[r].toUpperCase()} ${e.toUpperCase()}`}),r==="discover"&&s.jsx(T,{className:"py-3",mediaType:e,params:i,setParams:u}),s.jsx("div",{className:"flex flex-wrap justify-around bg-neutral gap-0.5",children:n==null?void 0:n.pages.map((m,h)=>s.jsx(N,{mediaList:m.results,mediaType:e,isLoading:g||f},h))}),n&&n.pages.length>=1&&s.jsx("div",{id:"observer",ref:a}),s.jsx(b,{})]}):s.jsx(E,{})};export{F as default};
