import{j as e,Q as x,c as b,r as g,E as m,C as _}from"./index-Ce8peCan.js";import{u as j,S as y}from"./ScrollToTopButton-CXcwcuQa.js";import{d as N,e as S}from"./TmdbQueries-phRyciwJ.js";import{M as C,S as T}from"./MediaList-DQLqe6th.js";const p=({label:r,options:o,value:s,onChange:a})=>e.jsxs("select",{id:r,className:"select select-bordered text-center overflow-hidden",value:s,onChange:t=>a(t.target.value),children:[e.jsx("option",{value:"",children:r}),o.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]}),E=({mediaType:r,value:o,onChange:s})=>{const t=N(r).map(n=>({value:String(n.id),label:n.name}));return e.jsx(p,{label:"Genres",options:t,value:o,onChange:s})},P=({className:r="",mediaType:o,params:s,setParams:a})=>e.jsxs("div",{className:`flex gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${r}`,children:[e.jsx(E,{mediaType:o,value:s.with_genres?s.with_genres:"",onChange:t=>a({...s,with_genres:t})}),e.jsx(p,{label:"Sort By Popularity",options:[{value:x.SORT_BY.VOTE_COUNT_DESC,label:"Descending"},{value:x.SORT_BY.VOTE_COUNT_ASC,label:"Ascending"}],value:s.sort_by_vote_count?s.sort_by_vote_count:"",onChange:t=>a({...s,sort_by_vote_count:t})})]}),V=()=>{const{ref:r,inView:o}=j(),{mediaType:s,category:a}=b(),t=(s==="movies"||s==="shows")&&a!==void 0&&a in _.categories,[n,l]=g.useState({with_genres:"",with_companies:"",sort_by:"",sort_by_date:"",sort_by_vote_average:"",sort_by_vote_count:"",include_adult:void 0,year:""});g.useEffect(()=>{const c=new URLSearchParams(window.location.search).get("with_genres"),u=new URLSearchParams(window.location.search).get("with_companies");c&&l(d=>({...d,with_genres:c})),u&&l(d=>({...d,with_companies:u}))},[]);const{data:i,error:h,fetchNextPage:v,isFetching:f,hasNextPage:w}=S(s,a,n,t);return g.useEffect(()=>{o&&w&&v()},[o]),t?h?e.jsx(m,{}):e.jsxs("div",{className:"p-3 flex flex-col gap-3 min-height-screen",children:[e.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${_.categories[a].toUpperCase()} ${s.toUpperCase()}`}),a==="discover"&&e.jsx(P,{className:"py-3",mediaType:s,params:n,setParams:l}),i&&(i.pages[0].total_results!==0?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 2xl:grid-cols-6 p-3 gap-3 bg-base-100 rounded-xl mx-auto",children:[i.pages.map(c=>e.jsx(C,{mediaList:c.results,mediaType:s},c.page)),f&&e.jsx(T,{count:20,className:"card-sm md:card-md lg:card-lg flex-shrink-0"})]}):e.jsx("p",{className:"text-sm md:text-3xl text-warning mx-auto md:whitespace-nowrap text-center",children:"No Results Found For Given Category"})),i&&i.pages.length>=1&&e.jsx("div",{id:"observer",ref:r}),e.jsx(y,{})]}):e.jsx(m,{message:"Invalid Category"})};export{V as default};
