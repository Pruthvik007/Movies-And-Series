import{r as m,j as s,C as h,w as g,L as f}from"./index-K9nGQWuA.js";const L="/movies-and-series/assets/save-_2xIT899.png",N="/movies-and-series/assets/saved-L_FPUTn8.png",_=()=>{const t=localStorage.getItem("watchlist");return t?JSON.parse(t):{movies:[],shows:[]}},M=()=>{const[t,e]=m.useState(_());return{watchList:t,addMediaToWatchList:(n,o)=>{e(l=>{const d={...l,[o]:[...l[o],n]};return localStorage.setItem("watchlist",JSON.stringify(d)),d})},removeMediaFromWatchList:(n,o)=>{e(l=>{const d={...l,[o]:l[o].filter(u=>u.id!==n.id)};return localStorage.setItem("watchlist",JSON.stringify(d)),d})},isMediaPresentInWatchlist:(n,o)=>t[o].find(l=>l.id===n)!==void 0}},S=({mediaDetails:t,mediaType:e,asIcons:a=!1,className:r=""})=>{const{addMediaToWatchList:i,removeMediaFromWatchList:n,isMediaPresentInWatchlist:o}=M(),l=c=>{c.preventDefault(),i(t,e)},d=c=>{c.preventDefault(),n(t,e)},u=c=>{const v=c?d:l,p=c?`bg-red-500 hover:bg-red-700 ${a&&"btn btn-xs md:btn-sm rounded-full"}`:`bg-blue-500 hover:bg-blue-700 ${a&&"btn btn-xs md:btn-sm rounded-full"}`,j=c?N:L,x=c?"Remove From Watchlist":"Add To Watchlist";return s.jsx("button",{onClick:v,className:`${p} text-white font-bold p-2 rounded-lg ${r}`,children:a?s.jsx("img",{src:j,alt:x,className:"w-full h-full"}):s.jsx("span",{children:x})})};return s.jsx("div",{children:u(o(t.id,e))})},b=({count:t=1,size:e,height:a,width:r})=>s.jsx(s.Fragment,{children:Array.from({length:t}).map((i,n)=>s.jsx("div",{role:"placeholder",className:"max-w-sm animate-pulse",children:s.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 ${e?`card-${e}`:`${!a&&!r?"card-sm md:card-md lg:card-lg":`${a} ${r}`}`}`})},n))}),w=({imagePath:t,alt:e,imageType:a="POSTER"})=>{const[r,i]=m.useState(!0);return s.jsx(s.Fragment,{children:t?s.jsx("img",{src:h.ENV.TMDB_API_IMAGE_URL+g[a].sm+t,alt:e,style:{filter:`${r?"blur(20px)":""}`,transition:"1s filter linear"},onLoad:()=>{i(!1)},loading:"lazy",height:"100%",width:"100%",srcSet:`${h.ENV.TMDB_API_IMAGE_URL+g[a].sm+t} 300w, ${h.ENV.TMDB_API_IMAGE_URL+g[a].md+t} 768w, ${h.ENV.TMDB_API_IMAGE_URL+g[a].lg+t} 1280w`,sizes:"(max-width: 300px) 300px, (max-width: 768px) 768px, 1280px"}):s.jsxs("div",{className:"relative",children:[s.jsx(b,{}),s.jsx("p",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e})]})})},I=({media:t,mediaType:e})=>{const a=t.poster_path?t.poster_path:t.backdrop_path,r=t.title||t.name||t.id.toString();return s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"card-sm md:card-md lg:card-lg overflow-y-clip",children:s.jsx(w,{imagePath:a,alt:r})}),t.vote_average!==0&&s.jsxs("div",{className:"absolute top-1 right-1 flex flex-col items-end gap-y-1",children:[s.jsx("div",{className:"badge badge-xs sm:badge-sm md:badge-md lg:badge-lg badge-neutral rounded-full",children:t.vote_average.toFixed(1)}),s.jsx(S,{mediaDetails:t,mediaType:e,asIcons:!0,className:"block lg:hidden lg:group-hover:block"})]})]})},W=({mediaList:t,mediaType:e,isLoading:a})=>s.jsxs(s.Fragment,{children:[t==null?void 0:t.map(r=>s.jsx(f,{to:`${h.ENV.BASE_URL}/details/${e}/${r.id}`,children:s.jsx(I,{media:r,mediaType:e})},r.id)),a&&s.jsx(b,{count:20})]});export{W as M,w as T,S as W,M as u};
