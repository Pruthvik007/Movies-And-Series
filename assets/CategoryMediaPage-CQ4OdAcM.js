import{j as s,c as m,r as l,C as c}from"./index-D9I9tlGh.js";import{u as b,E as d,S as y}from"./ErrorPage-DpZRbNbg.js";import{d as w,e as C}from"./TmdbQueries-DGtmJkse.js";import{M as N}from"./MediaList-CdtOxw94.js";const u=({label:r,options:o,value:e,onChange:a})=>s.jsxs("select",{id:r,className:"select select-bordered max-w-xs text-center",value:e,onChange:t=>a(t.target.value),children:[s.jsx("option",{value:"",children:r}),o.map(t=>s.jsx("option",{value:t.value,children:t.label},t.value))]}),E=({mediaType:r,value:o,onChange:e})=>{const t=w(r).map(n=>({value:String(n.id),label:n.name}));return s.jsx(u,{label:"Genres",options:t,value:o,onChange:e})},S=({className:r="",mediaType:o,params:e,setParams:a})=>s.jsxs("div",{className:`flex gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${r}`,children:[s.jsx(E,{mediaType:o,value:e.with_genres?e.with_genres:"",onChange:t=>a({...e,with_genres:t})}),s.jsx(u,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:e.sort_by?e.sort_by:"",onChange:t=>a({...e,sort_by:t})})]}),M=()=>{const{ref:r,inView:o}=b(),{mediaType:e,category:a}=m(),t=(e==="movies"||e==="shows")&&a!==void 0&&a in c.CATEGORIES,[n,x]=l.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:i,error:p,fetchNextPage:g,isFetching:f,isFetchingNextPage:h}=C(e,a,n);return l.useEffect(()=>{o&&g()},[o]),t?p?s.jsx(d,{}):s.jsxs("div",{className:"p-3 flex flex-col gap-3",children:[s.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${c.CATEGORIES[a].toUpperCase()} ${e.toUpperCase()}`}),a==="discover"&&s.jsx(S,{className:"py-3",mediaType:e,params:n,setParams:x}),i!==void 0&&s.jsx("div",{className:"flex flex-wrap justify-around bg-neutral gap-x-0.5 gap-y-2 p-2 rounded-xl",children:i.pages.map((v,j)=>s.jsx(N,{mediaList:v.results,mediaType:e,isLoading:f||h},j))}),i&&i.pages.length>=1&&s.jsx("div",{id:"observer",ref:r}),s.jsx(y,{})]}):s.jsx(d,{})};export{M as default};
