import{r as e,j as s,m as a,Q as t,i as l,g as r,n as o,C as n,f as i,S as c}from"./index-36k3dAL3.js";import{u as d}from"./useFilters-VEpk0lbk.js";import{S as m}from"./ScrollToTopButton-BCxdoSGM.js";import x from"./ErrorPage-B_3XjbQO.js";const u=e.memo((({label:e,options:a,value:t,onChange:l})=>s.jsxs("select",{id:e,className:"select select-bordered text-center overflow-hidden",value:t,onChange:e=>l(e.target.value),children:[s.jsx("option",{value:"",children:e}),a.map((e=>s.jsx("option",{value:e.value,children:e.label},e.value)))]}))),g=e.memo((({mediaType:e,value:t,onChange:l})=>{const r=a(e).map((e=>({value:String(e.id),label:e.name})));return s.jsx(u,{label:"Genres",options:r,value:t,onChange:l})})),p=e.memo((({className:a="",mediaType:t})=>{const{updateFilters:l,clearFilters:r,filters:o,isFiltersActive:n}=d(),i=e.useCallback((e=>{l("with_genres",e)}),[l]),c=e.useCallback((e=>{l("sort_by_vote_count",e)}),[l]);return s.jsxs("div",{className:`flex flex-col md:flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${a}`,children:[s.jsx(g,{mediaType:t,value:o.with_genres?o.with_genres:"",onChange:i}),s.jsx(v,{value:o.sort_by_vote_count?o.sort_by_vote_count:"",onChange:c}),n()&&s.jsx("button",{className:"btn btn-md btn-active btn-warning rounded-xl",onClick:r,children:"Clear Filters"})]})})),v=e.memo((({value:e,onChange:a})=>s.jsx(u,{label:"Sort By Popularity",options:[{value:t.SORT_BY.VOTE_COUNT_DESC,label:"Descending"},{value:t.SORT_BY.VOTE_COUNT_ASC,label:"Ascending"}],value:e,onChange:a}))),h=()=>{const{ref:a,inView:t}=l(),{mediaType:u,category:g}=r(),v=("movies"===u||"shows"===u)&&void 0!==g&&g in n.categories,{filters:h,activeFilterName:j}=d(),{data:b,error:f,fetchNextPage:C,isFetching:_,hasNextPage:y}=o(u,g,h,v);return e.useEffect((()=>{t&&y&&C()}),[t]),v?f?s.jsx(x,{}):s.jsxs("div",{className:"p-3 flex flex-col gap-3 min-height-screen",children:[s.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm md:text-2xl font-bold py-3 text-neutral-content",children:[s.jsx("span",{children:`${n.categories[g].toUpperCase()} ${u.toUpperCase()}`}),s.jsx("span",{children:j?`(From ${j})`:""})]}),"discover"===g&&s.jsx(p,{className:"py-3",mediaType:u}),b&&(0!==b.pages[0].total_results?s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 2xl:grid-cols-6 p-3 gap-3 bg-base-100 rounded-xl mx-auto",children:[b.pages.map((e=>s.jsx(i,{mediaList:e.results,mediaType:u},e.page))),_&&s.jsx(c,{count:20,className:"media-card"})]}):s.jsx("p",{className:"text-sm md:text-3xl text-warning mx-auto md:whitespace-nowrap text-center",children:"No Results Found For Given Category"})),b&&b.pages.length>=1&&s.jsx("div",{id:"observer",ref:a}),s.jsx(m,{})]}):s.jsx(x,{message:"Invalid Category"})};export{h as default};
