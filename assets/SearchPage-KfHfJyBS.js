import{r as n,j as e,R as f}from"./index-6XiZI6HP.js";import{u as g,S as h}from"./ScrollToTopButton-xiGW_hT4.js";import{M as j}from"./MediaSelector-hJpuhg1X.js";import{M as b}from"./MediaList-GM15O1Pa.js";import{c as y}from"./TmdbQueries-_Vd8cdMr.js";import{E as S}from"./ErrorPage-LMPwIqUk.js";function v(t,s){const[r,i]=n.useState(t);return n.useEffect(()=>{const a=setTimeout(()=>i(t),s||500);return()=>{clearTimeout(a)}},[t,s]),r}const N=({params:t,setParams:s,mediaType:r,setMediaType:i,className:a=""})=>{const[o,u]=n.useState(""),c=v(o,700);return n.useEffect(()=>{s({...t,query:c})},[c]),e.jsxs("div",{className:`flex gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg items-center ${a}`,children:[e.jsx("input",{type:"text",placeholder:"Search...",id:"search-input",className:"input input-bordered w-full max-w-xs input-sm md:input-md",value:o,onChange:l=>u(l.target.value)}),e.jsx(j,{mediaType:r,setMediaType:i})]})},P=()=>{const{ref:t,inView:s}=g(),[r,i]=n.useState("movies"),[a,o]=n.useState({page:1,query:"",include_adult:!1}),{data:u,error:c,fetchNextPage:l,isFetching:d,isFetchingNextPage:m}=y(r,a);return n.useEffect(()=>{s&&a.query.length>0&&l()},[s]),c?e.jsx(S,{}):e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-center py-3 text-neutral-content",children:"Search For Movies And TV Series"}),e.jsx(N,{className:"p-3",params:a,setParams:o,mediaType:r,setMediaType:i}),u!==void 0&&e.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-neutral rounded-xl p-3",children:u.pages.map((p,x)=>e.jsx(f.Fragment,{children:e.jsx(b,{mediaList:p.results,mediaType:r,isLoading:d||m})},x))}),e.jsx("div",{id:"observer",ref:t}),e.jsx(h,{})]})};export{P as default};
