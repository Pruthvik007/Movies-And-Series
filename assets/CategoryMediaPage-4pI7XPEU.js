import{j as s,b as j,r as c,C as d,R as v}from"./index-whv_UWvr.js";import{d as b,e as y}from"./TmdbQueries-EuOZo1Kf.js";import{M as w}from"./MediaList-kn3VIQZK.js";import{u as N,S as C}from"./ScrollToTopButton-5QlFWgQK.js";import{E}from"./ErrorPage-M-OoYqdC.js";import S from"./PageNotFound-bUYiB4B6.js";const u=({label:o,options:a,value:e,onChange:r})=>s.jsxs("select",{className:"select select-bordered max-w-xs text-center",value:e,onChange:t=>r(t.target.value),children:[s.jsx("option",{value:"",children:o}),a.map(t=>s.jsx("option",{value:t.value,children:t.label},t.value))]}),T=({mediaType:o,value:a,onChange:e})=>{const t=b(o).map(n=>({value:String(n.id),label:n.name}));return s.jsx(u,{label:"Genres",options:t,value:a,onChange:e})},_=({classNames:o="",mediaType:a,params:e,setParams:r})=>s.jsxs("div",{className:`flex flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${o}`,children:[s.jsx(T,{mediaType:a,value:e.with_genres?e.with_genres:"",onChange:t=>r({...e,with_genres:t})}),s.jsx(u,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:e.sort_by?e.sort_by:"",onChange:t=>r({...e,sort_by:t})})]}),A=()=>{const{ref:o,inView:a}=N(),{mediaType:e,category:r}=j(),t=e!==void 0&&r!==void 0&&(e==="movies"||e==="shows")&&r in d.CATEGORIES,[n,x]=c.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:i,error:p,fetchNextPage:l,isFetching:g,isFetchingNextPage:f}=y(e,r,n);return c.useEffect(()=>{a&&l()},[a,l]),t?p?s.jsx(E,{}):s.jsxs("div",{className:"p-3 flex flex-col",children:[s.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${d.CATEGORIES[r].toUpperCase()} ${e.toUpperCase()}`}),r==="discover"&&s.jsx(_,{classNames:"py-3",mediaType:e,params:n,setParams:x}),s.jsx("div",{className:"flex flex-wrap justify-around bg-neutral gap-0.5",children:i==null?void 0:i.pages.map((m,h)=>s.jsx(v.Fragment,{children:s.jsx(w,{mediaList:m.results,mediaType:e,isLoading:g||f})},h))}),s.jsx("div",{id:"observer",ref:o}),s.jsx(C,{})]}):s.jsx(S,{})};export{A as default};
