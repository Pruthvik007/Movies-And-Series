import{_ as W,c as Q,n as re,i as D,d as L,t as se,f as ne,e as V,g as k,s as ie,h as ae,k as _,S as ue,l as j,m as oe,o as ce,R as b,q as le,v as K,j as p,r as he,C as m,p as x,L as de,I as B,E as g,w as q}from"./index-SWIVRcNn.js";var Y=function(n){W(r,n);function r(i,t){var e;return e=n.call(this)||this,e.client=i,e.options=t,e.trackedProps=[],e.selectError=null,e.bindMethods(),e.setOptions(t),e}var s=r.prototype;return s.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},s.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),G(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},s.onUnsubscribe=function(){this.listeners.length||this.destroy()},s.shouldFetchOnReconnect=function(){return F(this.currentQuery,this.options,this.options.refetchOnReconnect)},s.shouldFetchOnWindowFocus=function(){return F(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},s.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},s.setOptions=function(t,e){var u=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=u.queryKey),this.updateQuery();var c=this.hasListeners();c&&H(this.currentQuery,a,this.options,u)&&this.executeFetch(),this.updateResult(e),c&&(this.currentQuery!==a||this.options.enabled!==u.enabled||this.options.staleTime!==u.staleTime)&&this.updateStaleTimeout();var o=this.computeRefetchInterval();c&&(this.currentQuery!==a||this.options.enabled!==u.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)},s.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),u=this.client.getQueryCache().build(this.client,e);return this.createResult(u,e)},s.getCurrentResult=function(){return this.currentResult},s.trackResult=function(t,e){var u=this,a={},c=function(l){u.trackedProps.includes(l)||u.trackedProps.push(l)};return Object.keys(t).forEach(function(o){Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:function(){return c(o),t[o]}})}),(e.useErrorBoundary||e.suspense)&&c("error"),a},s.getNextResult=function(t){var e=this;return new Promise(function(u,a){var c=e.subscribe(function(o){o.isFetching||(c(),o.isError&&(t!=null&&t.throwOnError)?a(o.error):u(o))})})},s.getCurrentQuery=function(){return this.currentQuery},s.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},s.refetch=function(t){return this.fetch(Q({},t,{meta:{refetchPage:t==null?void 0:t.refetchPage}}))},s.fetchOptimistic=function(t){var e=this,u=this.client.defaultQueryObserverOptions(t),a=this.client.getQueryCache().build(this.client,u);return a.fetch().then(function(){return e.createResult(a,u)})},s.fetch=function(t){var e=this;return this.executeFetch(t).then(function(){return e.updateResult(),e.currentResult})},s.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(re)),e},s.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!(D||this.currentResult.isStale||!L(this.options.staleTime))){var e=se(this.currentResult.dataUpdatedAt,this.options.staleTime),u=e+1;this.staleTimeoutId=setTimeout(function(){t.currentResult.isStale||t.updateResult()},u)}},s.computeRefetchInterval=function(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1},s.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!(D||this.options.enabled===!1||!L(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(e.options.refetchIntervalInBackground||ne.isFocused())&&e.executeFetch()},this.currentRefetchInterval))},s.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},s.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},s.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},s.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},s.createResult=function(t,e){var u=this.currentQuery,a=this.options,c=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,f=t!==u,d=f?t.state:this.currentQueryInitialState,O=f?this.currentResult:this.previousQueryResult,h=t.state,y=h.dataUpdatedAt,N=h.error,U=h.errorUpdatedAt,C=h.isFetching,v=h.status,A=!1,w=!1,R;if(e.optimisticResults){var T=this.hasListeners(),Z=!T&&G(t,e),ee=T&&H(t,u,e,a);(Z||ee)&&(C=!0,y||(v="loading"))}if(e.keepPreviousData&&!h.dataUpdateCount&&(O!=null&&O.isSuccess)&&v!=="error")R=O.data,y=O.dataUpdatedAt,v=O.status,A=!0;else if(e.select&&typeof h.data<"u")if(c&&h.data===(o==null?void 0:o.data)&&e.select===this.selectFn)R=this.selectResult;else try{this.selectFn=e.select,R=e.select(h.data),e.structuralSharing!==!1&&(R=V(c==null?void 0:c.data,R)),this.selectResult=R,this.selectError=null}catch(I){k().error(I),this.selectError=I}else R=h.data;if(typeof e.placeholderData<"u"&&typeof R>"u"&&(v==="loading"||v==="idle")){var S;if(c!=null&&c.isPlaceholderData&&e.placeholderData===(l==null?void 0:l.placeholderData))S=c.data;else if(S=typeof e.placeholderData=="function"?e.placeholderData():e.placeholderData,e.select&&typeof S<"u")try{S=e.select(S),e.structuralSharing!==!1&&(S=V(c==null?void 0:c.data,S)),this.selectError=null}catch(I){k().error(I),this.selectError=I}typeof S<"u"&&(v="success",R=S,w=!0)}this.selectError&&(N=this.selectError,R=this.selectResult,U=Date.now(),v="error");var te={status:v,isLoading:v==="loading",isSuccess:v==="success",isError:v==="error",isIdle:v==="idle",data:R,dataUpdatedAt:y,error:N,errorUpdatedAt:U,failureCount:h.fetchFailureCount,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&v!=="loading",isLoadingError:v==="error"&&h.dataUpdatedAt===0,isPlaceholderData:w,isPreviousData:A,isRefetchError:v==="error"&&h.dataUpdatedAt!==0,isStale:$(t,e),refetch:this.refetch,remove:this.remove};return te},s.shouldNotifyListeners=function(t,e){if(!e)return!0;var u=this.options,a=u.notifyOnChangeProps,c=u.notifyOnChangePropsExclusions;if(!a&&!c||a==="tracked"&&!this.trackedProps.length)return!0;var o=a==="tracked"?this.trackedProps:a;return Object.keys(t).some(function(l){var f=l,d=t[f]!==e[f],O=o==null?void 0:o.some(function(y){return y===l}),h=c==null?void 0:c.some(function(y){return y===l});return d&&!h&&(!o||O)})},s.updateResult=function(t){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!ie(this.currentResult,e)){var u={cache:!0};(t==null?void 0:t.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,e)&&(u.listeners=!0),this.notify(Q({},u,t))}},s.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))}},s.onQueryUpdate=function(t){var e={};t.type==="success"?e.onSuccess=!0:t.type==="error"&&!ae(t.error)&&(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},s.notify=function(t){var e=this;_.batch(function(){t.onSuccess?(e.options.onSuccess==null||e.options.onSuccess(e.currentResult.data),e.options.onSettled==null||e.options.onSettled(e.currentResult.data,null)):t.onError&&(e.options.onError==null||e.options.onError(e.currentResult.error),e.options.onSettled==null||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach(function(u){u(e.currentResult)}),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})})},r}(ue);function fe(n,r){return r.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&r.retryOnMount===!1)}function G(n,r){return fe(n,r)||n.state.dataUpdatedAt>0&&F(n,r,r.refetchOnMount)}function F(n,r,s){if(r.enabled!==!1){var i=typeof s=="function"?s(n):s;return i==="always"||i!==!1&&$(n,r)}return!1}function H(n,r,s,i){return s.enabled!==!1&&(n!==r||i.enabled===!1)&&(!s.suspense||n.state.status!=="error")&&$(n,s)}function $(n,r){return n.isStaleByTime(r.staleTime)}var ve=function(n){W(r,n);function r(i,t){return n.call(this,i,t)||this}var s=r.prototype;return s.bindMethods=function(){n.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},s.setOptions=function(t,e){n.prototype.setOptions.call(this,Q({},t,{behavior:j()}),e)},s.getOptimisticResult=function(t){return t.behavior=j(),n.prototype.getOptimisticResult.call(this,t)},s.fetchNextPage=function(t){var e;return this.fetch({cancelRefetch:(e=t==null?void 0:t.cancelRefetch)!=null?e:!0,throwOnError:t==null?void 0:t.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:t==null?void 0:t.pageParam}}})},s.fetchPreviousPage=function(t){var e;return this.fetch({cancelRefetch:(e=t==null?void 0:t.cancelRefetch)!=null?e:!0,throwOnError:t==null?void 0:t.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:t==null?void 0:t.pageParam}}})},s.createResult=function(t,e){var u,a,c,o,l,f,d=t.state,O=n.prototype.createResult.call(this,t,e);return Q({},O,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:oe(e,(u=d.data)==null?void 0:u.pages),hasPreviousPage:ce(e,(a=d.data)==null?void 0:a.pages),isFetchingNextPage:d.isFetching&&((c=d.fetchMeta)==null||(o=c.fetchMore)==null?void 0:o.direction)==="forward",isFetchingPreviousPage:d.isFetching&&((l=d.fetchMeta)==null||(f=l.fetchMore)==null?void 0:f.direction)==="backward"})},r}(Y);function pe(){var n=!1;return{clearReset:function(){n=!1},reset:function(){n=!0},isReset:function(){return n}}}var Re=b.createContext(pe()),ge=function(){return b.useContext(Re)};function Oe(n,r,s){return typeof r=="function"?r.apply(void 0,s):typeof r=="boolean"?r:!!n}function z(n,r){var s=b.useRef(!1),i=b.useState(0),t=i[1],e=le(),u=ge(),a=e.defaultQueryObserverOptions(n);a.optimisticResults=!0,a.onError&&(a.onError=_.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=_.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=_.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(u.isReset()||(a.retryOnMount=!1));var c=b.useState(function(){return new r(e,a)}),o=c[0],l=o.getOptimisticResult(a);if(b.useEffect(function(){s.current=!0,u.clearReset();var f=o.subscribe(_.batchCalls(function(){s.current&&t(function(d){return d+1})}));return o.updateResult(),function(){s.current=!1,f()}},[u,o]),b.useEffect(function(){o.setOptions(a,{listeners:!1})},[a,o]),a.suspense&&l.isLoading)throw o.fetchOptimistic(a).then(function(f){var d=f.data;a.onSuccess==null||a.onSuccess(d),a.onSettled==null||a.onSettled(d,null)}).catch(function(f){u.clearReset(),a.onError==null||a.onError(f),a.onSettled==null||a.onSettled(void 0,f)});if(l.isError&&!u.isReset()&&!l.isFetching&&Oe(a.suspense,a.useErrorBoundary,[l.error,o.getCurrentQuery()]))throw l.error;return a.notifyOnChangeProps==="tracked"&&(l=o.trackResult(l,a)),l}function M(n,r,s){var i=K(n,r,s);return z(i,Y)}function J(n,r,s){var i=K(n,r,s);return z(i,ve)}const X=({count:n=1,size:r,height:s,width:i})=>p.jsx(p.Fragment,{children:Array.from({length:n}).map((t,e)=>p.jsx("div",{role:"placeholder",className:"max-w-sm animate-pulse",children:p.jsx("div",{className:`bg-gray-200 dark:bg-gray-700 ${r?`card-${r}`:`${!s&&!i?"card-sm md:card-md lg:card-lg":`${s} ${i}`}`}`})},e))}),Se=({media:n})=>{const r=n.poster_path?n.poster_path:n.backdrop_path,[s,i]=he.useState(!0);return p.jsxs("div",{className:"card-sm md:card-md lg:card-lg overflow-y-clip relative",children:[r?p.jsx("img",{src:m.ENV.TMDB_API_IMAGE_URL+x.lg+r,alt:n.title?n.title:n.name,style:{filter:`${s?"blur(20px)":""}`,transition:"1s filter linear"},onLoad:()=>{i(!1)},height:"100%",width:"100%",srcSet:`${m.ENV.TMDB_API_IMAGE_URL+x.sm+r} 300w, ${m.ENV.TMDB_API_IMAGE_URL+x.md+r} 768w, ${m.ENV.TMDB_API_IMAGE_URL+x.lg+r} 1280w`,sizes:"(max-width: 300px) 300px, (max-width: 768px) 768px, 1280px"}):p.jsx(X,{}),n.vote_average!==0&&p.jsx("div",{className:"absolute top-1 right-1",children:p.jsxs("div",{className:"badge badge-xs sm:badge-sm md:badge-md lg:badge-lg badge-neutral",children:[n.vote_average.toFixed(1),"/10"]})})]})},be=({mediaList:n,mediaType:r,isLoading:s})=>p.jsxs(p.Fragment,{children:[n==null?void 0:n.map(i=>p.jsx(de,{to:`/${m.ENV.BASE_URL}/details/${r}/${i.id}`,children:p.jsx(Se,{media:i})},i.id)),s&&p.jsx(X,{count:20})]});async function E(n="",r="GET",s=void 0){const i=new URL(m.ENV.TMDB_API_BASE_URL+n);return i.searchParams.set("api_key",m.ENV.TMDB_API_KEY),(await fetch(i,{method:r,body:JSON.stringify(s)})).json()}class ye{getMedia(r,s){if(s){const i=new URLSearchParams(Object.entries(s).filter(t=>t[1]!==null&&t[1]!==void 0&&t[1]!=="")).toString();return E(r+"?"+i)}else return E(r)}getMediaDetails(r,s){return E(`${r}${s}`)}getMediaSearchResults(r,s){const i=new URLSearchParams(Object.entries(s).filter(t=>t[1]!==null&&t[1]!==void 0&&t[1]!=="")).toString();return E(r+"?"+i)}getMediaRecomendations(r,s){return E(`${r.replace(B,s.toString())}`)}getGenres(r){return E(r)}getVideos(r,s){return E(`${r.replace(B,s)}`)}}const P=new ye,me=(n,r)=>M([`${n}-${r}`,r],()=>P.getMedia(q[n][r]),{keepPreviousData:!0}),Pe=(n,r,s)=>J({queryKey:[`${n}-${r}`,n,r,s],queryFn:({pageParam:i=1})=>P.getMedia(q[n==null?void 0:n.toUpperCase()][r==null?void 0:r.toUpperCase()],{...s,page:i}),getNextPageParam:i=>i.page+1}),Ie=(n,r)=>M([`${n}-details-${r}`,r,n],()=>P.getMediaDetails(n==="MOVIES"?g.DETAILS_OF_MOVIE:g.DETAILS_OF_SHOWS,r)),_e=(n,r)=>M([`${n}-recomendations-${r}`,r,n],()=>P.getMediaRecomendations(n==="MOVIES"?g.MOVIE_RECOMENDATIONS:g.SHOW_RECOMENDATIONS,r),{keepPreviousData:!1}),Me=(n,r)=>J({queryKey:[`${n}-search`,n,r],queryFn:({pageParam:s=1})=>P.getMediaSearchResults(n==="MOVIES"?g.SEARCH_MOVIE:g.SEARCH_SHOWS,{...r,page:s}),enabled:r.query.length>0,getNextPageParam:s=>s.page+1}),xe=n=>{const r=n==="MOVIES"?g.GENRES_OF_MOVIES:g.GENRES_OF_SHOWS,{data:s,error:i}=M([`${n}-genres`],()=>P.getGenres(r));return i?[]:(s==null?void 0:s.genres)||[]},Qe=(n,r)=>{const s=n==="MOVIES"?g.VIDEOS_OF_MOVIE:g.VIDEOS_OF_SHOW;return M([`${n}-videos-${r}`],()=>P.getVideos(s,r))};export{be as M,Ie as a,_e as b,Me as c,xe as d,Pe as e,me as f,Qe as u};
