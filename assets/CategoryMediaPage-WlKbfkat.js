import{j as e,u as m,C as n,r as h,R as j}from"./index-XZV_uwux.js";import{d as b,e as v,M as C}from"./TmdbQueries-h9-ZBzU0.js";import{u as y,S}from"./useInfiniteScroll-NoIEAHRU.js";import{E as N}from"./ErrorPage-YI-jYT-r.js";import w from"./PageNotFound-VbxZMj0P.js";const i=({label:s,options:t,value:r,onChange:o})=>e.jsxs("select",{className:"select select-bordered max-w-xs text-center",value:r,onChange:a=>o(a.target.value),children:[e.jsx("option",{value:"",children:s}),t.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]}),E=({mediaType:s,value:t,onChange:r})=>{const a=b(s).map(l=>({value:String(l.id),label:l.name}));return e.jsx(i,{label:"Genres",options:a,value:t,onChange:r})},T=({classNames:s="",mediaType:t,params:r,setParams:o})=>e.jsxs("div",{className:`flex flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${s}`,children:[e.jsx(E,{mediaType:t,value:r.with_genres?r.with_genres:"",onChange:a=>o({...r,with_genres:a})}),e.jsx(i,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:r.sort_by?r.sort_by:"",onChange:a=>o({...r,sort_by:a})})]}),R=()=>{const{mediaType:s,category:t}=m(),r=s!==void 0&&t!==void 0&&(s.toUpperCase()==="MOVIES"||s.toUpperCase()==="SHOWS")&&t.toUpperCase()in n.CATEGORIES,[o,a]=h.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:l,error:c,fetchNextPage:u,hasNextPage:d,isFetching:p,isFetchingNextPage:x}=v(s,t,o);return y(()=>{d&&u()}),r?c?e.jsx(N,{}):e.jsxs("div",{className:"p-3 flex flex-col",children:[e.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${n.CATEGORIES[t.toUpperCase()]} ${s.toUpperCase()}`}),(t==null?void 0:t.toUpperCase())==="DISCOVER"&&e.jsx(T,{classNames:"py-3",mediaType:s,params:o,setParams:a}),e.jsx("div",{className:"flex flex-wrap justify-around bg-neutral gap-0.5",children:l==null?void 0:l.pages.map((g,f)=>e.jsx(j.Fragment,{children:e.jsx(C,{mediaList:g.results,mediaType:s,isLoading:p||x})},f))}),e.jsx(S,{})]}):e.jsx(w,{})};export{R as default};
