import{j as e,u as m,C as n,r as h,R as j}from"./index-mXupzFNE.js";import{d as b,e as v,M as C}from"./TmdbQueries-6VKyQBNv.js";import{u as y,S}from"./useInfiniteScroll-L4cMuVZD.js";import{E as N}from"./ErrorPage-jZhECLeV.js";import w from"./PageNotFound-AgDmZ_YH.js";const i=({label:s,options:t,value:a,onChange:o})=>e.jsxs("select",{className:"select select-bordered max-w-xs text-center",value:a,onChange:r=>o(r.target.value),children:[e.jsx("option",{value:"",children:s}),t.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]}),E=({mediaType:s,value:t,onChange:a})=>{const r=b(s).map(l=>({value:String(l.id),label:l.name}));return e.jsx(i,{label:"Genres",options:r,value:t,onChange:a})},T=({classNames:s="",mediaType:t,params:a,setParams:o})=>e.jsxs("div",{className:`flex flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${s}`,children:[e.jsx(E,{mediaType:t,value:a.with_genres?a.with_genres:"",onChange:r=>o({...a,with_genres:r})}),e.jsx(i,{label:"Sort By Popularity",options:[{value:"popularity.desc",label:"High To Low"},{value:"popularity.asc",label:"Low To High"}],value:a.sort_by?a.sort_by:"",onChange:r=>o({...a,sort_by:r})})]}),R=()=>{const{mediaType:s,category:t}=m(),a=s!==void 0&&t!==void 0&&(s.toUpperCase()==="MOVIES"||s.toUpperCase()==="SHOWS")&&t.toUpperCase()in n.CATEGORIES,[o,r]=h.useState({with_genres:"",sort_by:"",include_adult:void 0,year:""}),{data:l,error:c,fetchNextPage:p,hasNextPage:u,isFetching:d,isFetchingNextPage:x}=v(s,t,o);return y(()=>{u&&p()}),a?c?e.jsx(N,{}):e.jsxs("div",{className:"p-3 flex flex-col",children:[e.jsx("p",{className:"text-3xl font-bold text-center py-3 text-neutral-content",children:`${n.CATEGORIES[t.toUpperCase()]} ${s.toUpperCase()}`}),(t==null?void 0:t.toUpperCase())==="DISCOVER"&&e.jsx(T,{classNames:"py-3",mediaType:s,params:o,setParams:r}),e.jsx("div",{className:"flex flex-wrap gap-3 justify-center bg-neutral p-3",children:l==null?void 0:l.pages.map((g,f)=>e.jsx(j.Fragment,{children:e.jsx(C,{mediaList:g.results,mediaType:s,isLoading:d||x})},f))}),e.jsx(S,{})]}):e.jsx(w,{})};export{R as default};
