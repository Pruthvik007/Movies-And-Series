import{j as e,M as u,C as i,r as h,a as p,u as f,b as v,c as b,B as N}from"./index-p4cGxFSH.js";import{u as w,a as y,b as M}from"./TmdbQueries-QZ1KITRY.js";import{W as _,T as C,M as S}from"./MediaList-wiMLdCgB.js";import{E as L}from"./ErrorPage-G6bleU8o.js";const j=({name:t,id:s,type:a="VIDEO",mediaType:n="movies"})=>{const r=(a==="VIDEO"?i.YOUTUBE_VIDEO_URL:n==="movies"?i.VIDSRC_MOVIE_URL:i.VIDSRC_SHOW_URL)+s;return e.jsxs("div",{children:[e.jsx(u.Header,{children:e.jsx("h3",{className:"text-xl font-semibold text",children:t})}),e.jsxs(u.Body,{children:[s.length>0&&e.jsx("iframe",{className:"w-full h-80",src:r,allowFullScreen:!0}),s.length===0&&e.jsx("p",{className:"text-xl font-bold text-red-500 text-center",children:"Video Not Available"})]})]})},R=({mediaType:t,id:s})=>{const{openModal:a}=h.useContext(p),n=()=>{a(e.jsx(j,{name:"Watch At VidSrc",id:s.toString(),type:"MEDIA",mediaType:t}))};return f("Enter",n),e.jsx("button",{onClick:n,className:"custom-btn-primary",children:t==="movies"?"Watch Movie":"Watch Show"})},E=({color:t})=>e.jsx("svg",{className:`w-4 h-4 ms-1 ${t}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),B=({actualRating:t,totalRating:s,displayText:a})=>e.jsxs("div",{className:"flex items-center flex-wrap gap-1 max-w-fit",children:[e.jsx("div",{className:"flex",children:Array.from({length:s}).map((n,r)=>e.jsx(E,{color:r<Math.floor(t)?"text-yellow-300":"text-gray-300 dark:text-gray-500"},r))}),a&&e.jsx("p",{className:"text-sm ms-1",children:a})]}),V=({mediaType:t,mediaDetails:s})=>{const{openModal:a}=h.useContext(p),n=w(t,s.id.toString()),r=()=>{let o={name:"",id:""};if(n.isSuccess){const c=n.data.results.find(l=>l.official&&l.site==="YouTube"&&l.type==="Trailer"&&l.name.toLowerCase().includes("trailer"));c&&(o={name:c.name,id:c.key})}a(e.jsx(j,{...o}))};return f(" ",r),e.jsxs("div",{className:"rounded-lg shadow flex flex-col items-center md:flex-row gap-5 text-center md:text-left justify-center p-5 bg-base-100",children:[e.jsx(I,{mediaDetails:s}),e.jsxs("div",{className:"flex flex-col gap-3 bg-neutral p-3 rounded-xl",children:[e.jsx(k,{mediaDetails:s,mediaType:t}),s.tagline!==void 0&&s.tagline.length>0&&e.jsxs("p",{className:"text-md md:text-lg italic font-semibold text",children:['"',s.tagline,'"']}),e.jsx("div",{className:"text-lg md:text-xl italic font-semibold text",children:e.jsx("p",{children:s.overview})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-center items-center md:justify-start",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:r,className:"custom-btn-primary",children:"Watch Trailer"}),e.jsx(R,{mediaType:t,id:s.id})]}),e.jsx(_,{mediaDetails:s,mediaType:t})]}),e.jsx(g,{data:s.genres,type:"Genres"}),e.jsx(g,{data:s.production_companies,type:"Production Companies"})]})]})},k=({mediaDetails:t,mediaType:s})=>{const a=s==="movies"?t.original_title:t.original_name,n=s==="movies"?t.release_date:t.first_air_date;return e.jsxs("p",{className:"text-3xl text-white",children:[a," (",n.split("-")[0],")"]})},g=({data:t,type:s})=>e.jsxs("div",{className:"flex flex-col items-center md:flex-row bg-base-100 rounded-xl py-2 px-4 gap-x-2",children:[e.jsx("p",{className:"text-lg text whitespace-nowrap",children:s}),e.jsx("div",{className:"flex rounded-md shadow-sm gap-2 p-2 flex-wrap",role:"group",children:t.map(a=>e.jsx("button",{type:"button",className:"btn btn-sm md:btn-md btn-active btn-info",children:a.name},a.id))})]}),I=({mediaDetails:t})=>e.jsxs("div",{className:"flex flex-col items-center gap-y-5",children:[e.jsx(C,{imagePath:t==null?void 0:t.poster_path,alt:t==null?void 0:t.id.toString(),loading:"eager",className:"card-lg"}),e.jsx(B,{actualRating:Number((t.vote_average/2).toFixed(1)),totalRating:5,displayText:`${t.vote_average.toFixed(1)} / 10`})]}),O=()=>{const t=v();return e.jsx("button",{onClick:()=>t(-1),className:"btn hover:btn-primary btn-neutral btn-sm lg:btn-md text-white font-bold py-2 px-4 rounded fixed right-5 bottom-5",children:"Back"})},U=()=>{var c,l,x,d,m;const{id:t,mediaType:s}=b(),{isLoading:a,error:n,data:r}=y(s,t),o=M(s,t);return a?e.jsx(N,{}):n?e.jsx(L,{}):e.jsxs("div",{className:"flex flex-col gap-5 p-3",children:[r&&e.jsx(V,{mediaDetails:r,mediaType:s}),((l=(c=o.data)==null?void 0:c.results)==null?void 0:l.length)!==void 0&&((d=(x=o.data)==null?void 0:x.results)==null?void 0:d.length)>0&&e.jsxs("div",{className:"bg-neutral rounded-xl p-3",children:[e.jsx("p",{className:"text-3xl font-bold text-white font-sans py-2",children:"Recommendations"}),e.jsx("div",{className:"flex gap-3 scrollbar-hidden",children:e.jsx(S,{mediaList:(m=o.data)==null?void 0:m.results,mediaType:s,isLoading:o.isLoading})})]}),e.jsx(O,{})]})};export{U as default};
