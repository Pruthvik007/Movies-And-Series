import{j as e,l as a,Q as s,g as t,m as l,C as r,f as o}from"./index-ByjpfSiE.js";import{r as n,u as i}from"./react-Bjq67HMM.js";import{u as c}from"./useFilters-m-FtghcV.js";import{S as d}from"./ScrollToTopButton-BpszzmEU.js";import m from"./ErrorPage-CY_vQH6G.js";import"./react_query-DefDDE5c.js";const u=n.memo((({label:a,options:s,value:t,onChange:l})=>e.jsxs("select",{"aria-label":a,id:a,className:"select select-bordered text-center overflow-hidden",value:t,onChange:e=>l(e.target.value),children:[e.jsx("option",{value:"",children:a}),s.map((a=>e.jsx("option",{value:a.value,children:a.label},a.value)))]}))),x=n.memo((({mediaType:s,value:t,onChange:l})=>{const r=a(s).map((e=>({value:String(e.id),label:e.name})));return e.jsx(u,{label:"Genres",options:r,value:t,onChange:l})})),p=n.memo((({className:a="",mediaType:s})=>{const{updateFilters:t,clearFilters:l,filters:r,isFiltersActive:o}=c(),i=n.useCallback((e=>{t("with_genres",e)}),[t]),d=n.useCallback((e=>{t("sort_by_vote_count",e)}),[t]);return e.jsxs("div",{className:`flex flex-col md:flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${a}`,children:[e.jsx(x,{mediaType:s,value:r.with_genres?r.with_genres:"",onChange:i}),e.jsx(g,{value:r.sort_by_vote_count?r.sort_by_vote_count:"",onChange:d}),o()&&e.jsx("button",{className:"btn btn-md btn-active btn-warning rounded-xl",onClick:l,children:"Clear Filters"})]})})),g=n.memo((({value:a,onChange:t})=>e.jsx(u,{label:"Sort By Popularity",options:[{value:s.SORT_BY.VOTE_COUNT_DESC,label:"Descending"},{value:s.SORT_BY.VOTE_COUNT_ASC,label:"Ascending"}],value:a,onChange:t}))),v=()=>{const{ref:a,inView:s}=i(),{mediaType:u,category:x}=t(),g=("movies"===u||"shows"===u)&&void 0!==x&&x in r.categories,{filters:v,activeFilterName:h}=c(),{data:j,error:b,fetchNextPage:f,isFetching:C,hasNextPage:_}=l(u,x,v,g);return n.useEffect((()=>{s&&_&&f()}),[s]),g?b?e.jsx(m,{}):e.jsxs("div",{className:"p-3 flex flex-col gap-3 min-height-screen",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm md:text-2xl font-bold py-3 text-neutral-content",children:[e.jsx("span",{children:`${r.categories[x].toUpperCase()} ${u.toUpperCase()}`}),e.jsx("span",{children:h?`(From ${h})`:""})]}),"discover"===x&&e.jsx(p,{className:"py-3",mediaType:u}),j&&(0!==j.pages[0].total_results?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 2xl:grid-cols-6 p-3 gap-3 bg-base-100 rounded-xl mx-auto",children:e.jsx(o,{mediaList:j.pages.flatMap((e=>e.results)),mediaType:u,isLoading:C})}):e.jsx("p",{className:"text-sm md:text-3xl text-warning mx-auto md:whitespace-nowrap text-center",children:"No Results Found For Given Category"})),j&&j.pages.length>=1&&e.jsx("div",{id:"observer",ref:a}),e.jsx(d,{})]}):e.jsx(m,{message:"Invalid Category"})};export{v as default};
