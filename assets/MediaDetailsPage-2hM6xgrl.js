import{j as e,r as f,M as m,a as g,C as d,L as b,u as p,B as j}from"./index-XZV_uwux.js";import{T as w,u as v,a as N,b as y,M as k}from"./TmdbQueries-h9-ZBzU0.js";import{E as M}from"./ErrorPage-YI-jYT-r.js";const _=({color:r})=>e.jsx("svg",{className:`w-4 h-4 ms-1 ${r}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),S=({actualRating:r,totalRating:t,displayText:s})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-row items-center flex-wrap justify-center gap-1",children:[e.jsx("div",{className:"flex flex-row",children:Array.from({length:t}).map((l,a)=>e.jsx(_,{color:a<Math.floor(r)?"text-yellow-300":"text-gray-300 dark:text-gray-500"},a))}),s&&e.jsx("p",{className:"text-sm ms-1",children:s})]})}),E=({genres:r})=>e.jsxs("div",{id:"genres",className:"flex flex-col items-center md:flex-row bg-base-100 rounded-xl p-3 gap-x-2 overflow-x-auto",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:"Genres:"}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsx("div",{className:"flex flex-row justify-start rounded-md shadow-sm gap-2 p-2",role:"group",children:r.map(t=>e.jsx("button",{disabled:!0,type:"button",className:"px-4 py-2 text-sm font-medium bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white",children:t.name},t.id))})})]}),V=({mediaDetails:r})=>e.jsxs("div",{id:"production_companies",className:"flex flex-col items-center md:flex-row bg-base-100 rounded-xl p-3 gap-x-2 overflow-x-auto",children:[e.jsx("p",{className:"text-xl font-bold text-white",children:"Production Companies:"}),e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsx("div",{className:"flex flex-row justify-start rounded-md shadow-sm gap-2 p-2",role:"group",children:r.production_companies.map(t=>e.jsx("button",{disabled:!0,type:"button",className:"px-4 py-2 text-sm font-medium bg-white border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-blue-500 dark:focus:text-white",children:t.name},t.id))})})]}),L=({mediaDetails:r,mediaType:t})=>e.jsx(e.Fragment,{children:t.toUpperCase()==="MOVIES"?e.jsxs("p",{className:"text-3xl text-white",children:[r.original_title," (",r.release_date.split("-")[0],")"]}):e.jsxs("p",{className:"text-3xl text-white",children:[r.original_name," (",r.first_air_date.split("-")[0],")"]})}),h=({name:r,id:t,type:s="VIDEO",mediaType:l})=>e.jsxs("div",{children:[e.jsx(g.Header,{children:e.jsx("h3",{className:"text-xl font-semibold text",children:r})}),e.jsxs(g.Body,{children:[t.length>0&&e.jsx("iframe",{className:"w-full h-80",src:(s==="VIDEO"?d.YOUTUBE_VIDEO_URL:l==="MOVIES"?d.VIDSRC_MOVIE_URL:d.VIDSRC_SHOW_URL)+t,allowFullScreen:!0}),t.length===0&&e.jsx("p",{className:"text-xl font-bold text-red-500 text-center",children:"Video Not Available"})]})]}),C=({mediaType:r,mediaDetails:t})=>{const{openModal:s}=f.useContext(m),l=v(r,t.id.toString());let a={name:"",id:""};if(l.isSuccess){const o=l.data.results.filter(n=>n.official&&n.site==="YouTube"&&n.type==="Trailer"&&n.name==="Official Trailer")[0];a={name:o?o.name:"",id:o?o.key:""}}const x=()=>e.jsx("button",{onClick:()=>s(e.jsx(h,{name:"Watch At VidSrc",id:t.id.toString(),type:"MEDIA",mediaType:r})),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:r==="MOVIES"?"Watch Movie":"Watch Show"});return e.jsxs("div",{className:"flex flex-col gap-3 bg-neutral p-3 rounded-xl max-w-full",children:[e.jsx(L,{mediaDetails:t,mediaType:r}),t.tagline!==void 0&&t.tagline.length>0&&e.jsxs("p",{className:"text-md md:text-lg italic font-semibold text",children:['"',t.tagline,'"']}),e.jsx("div",{className:"text-lg md:text-xl italic font-semibold text",children:e.jsx("p",{children:t.overview})}),e.jsxs("div",{className:"flex flex-row gap-3 justify-center md:justify-start",children:[e.jsx("button",{onClick:()=>s(e.jsx(h,{...a})),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg",children:"Play Trailer"}),e.jsx(x,{})]}),e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row max-w-6xl",children:[e.jsx(E,{genres:t.genres}),e.jsx(V,{mediaDetails:t})]})]})},R=({mediaType:r,mediaDetails:t})=>e.jsxs("div",{className:"rounded-lg shadow flex flex-col items-center md:flex-row gap-5 text-center md:text-left justify-center p-5 bg-base-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"card-lg",children:e.jsx(w,{imagePath:t==null?void 0:t.poster_path,alt:t==null?void 0:t.id.toString()})}),e.jsx(S,{actualRating:Number((t.vote_average/2).toFixed(1)),totalRating:5,displayText:`${t.vote_average.toFixed(1)} / 10`})]}),t&&e.jsx(C,{mediaDetails:t,mediaType:r})]}),I=({to:r})=>e.jsx("button",{className:"btn hover:btn-primary btn-neutral btn-sm lg:btn-md text-white font-bold py-2 px-4 rounded fixed right-5 bottom-5",children:e.jsx(b,{to:r,children:"Back"})}),A=()=>{var o,n,i,c,u;const{id:r,mediaType:t}=p(),{isLoading:s,error:l,data:a}=N(t,r),x=y(t,r);return s?e.jsx(j,{}):l?e.jsx(M,{}):e.jsxs("div",{className:"flex flex-col gap-5 p-3",children:[a&&e.jsx(R,{mediaDetails:a,mediaType:t}),((n=(o=x.data)==null?void 0:o.results)==null?void 0:n.length)!==void 0&&((c=(i=x.data)==null?void 0:i.results)==null?void 0:c.length)>0&&e.jsxs("div",{className:"bg-neutral rounded-xl p-3",children:[e.jsx("p",{className:"text-3xl font-bold text-white font-sans py-2",children:"Recommendations"}),e.jsx("div",{className:"flex flex-row gap-3 scrollbar-hidden",children:e.jsx(k,{mediaList:(u=x.data)==null?void 0:u.results,mediaType:t,isLoading:x.isLoading})})]}),e.jsx(I,{to:`/${d.ENV.BASE_URL}`})]})};export{A as default};
