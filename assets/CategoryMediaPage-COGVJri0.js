import{j as e,m as s,Q as a,i as t,g as l,n as r,r as n,C as o,f as i,S as c}from"./index-feUWwkPH.js";import{u as d}from"./useFilters-CR3xKYoA.js";import{S as x}from"./ScrollToTopButton--bQ9J0n3.js";import m from"./ErrorPage-C0UoVKfV.js";const p=({label:s,options:a,value:t,onChange:l})=>e.jsxs("select",{id:s,className:"select select-bordered text-center overflow-hidden",value:t,onChange:e=>l(e.target.value),children:[e.jsx("option",{value:"",children:s}),a.map((s=>e.jsx("option",{value:s.value,children:s.label},s.value)))]}),g=({mediaType:a,value:t,onChange:l})=>{const r=s(a).map((e=>({value:String(e.id),label:e.name})));return e.jsx(p,{label:"Genres",options:r,value:t,onChange:l})},u=({className:s="",mediaType:t})=>{const{updateFilters:l,clearFilters:r,filters:n,isFiltersActive:o}=d();return e.jsxs("div",{className:`flex flex-col md:flex-row gap-3 bg-base-100 p-5 w-full justify-center border-black rounded-lg ${s}`,children:[e.jsx(g,{mediaType:t,value:n.with_genres?n.with_genres:"",onChange:e=>l("with_genres",e)}),e.jsx(p,{label:"Sort By Popularity",options:[{value:a.SORT_BY.VOTE_COUNT_DESC,label:"Descending"},{value:a.SORT_BY.VOTE_COUNT_ASC,label:"Ascending"}],value:n.sort_by_vote_count?n.sort_by_vote_count:"",onChange:e=>l("sort_by_vote_count",e)}),o()&&e.jsx("button",{className:"btn btn-md btn-active btn-warning rounded-xl",onClick:r,children:"Clear Filters"})]})},v=()=>{const{ref:s,inView:a}=t(),{mediaType:p,category:g}=l(),v=("movies"===p||"shows"===p)&&void 0!==g&&g in o.categories,{filters:h,activeFilterName:j}=d(),{data:f,error:b,fetchNextPage:_,isFetching:y,hasNextPage:C}=r(p,g,h,v);return n.useEffect((()=>{a&&C&&_()}),[a]),v?b?e.jsx(m,{}):e.jsxs("div",{className:"p-3 flex flex-col gap-3 min-height-screen",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm md:text-2xl font-bold py-3 text-neutral-content",children:[e.jsx("span",{children:`${o.categories[g].toUpperCase()} ${p.toUpperCase()}`}),e.jsx("span",{children:j?`(From ${j})`:""})]}),"discover"===g&&e.jsx(u,{className:"py-3",mediaType:p}),f&&(0!==f.pages[0].total_results?e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 2xl:grid-cols-6 p-3 gap-3 bg-base-100 rounded-xl mx-auto",children:[f.pages.map((s=>e.jsx(i,{mediaList:s.results,mediaType:p},s.page))),y&&e.jsx(c,{count:20,className:"media-card"})]}):e.jsx("p",{className:"text-sm md:text-3xl text-warning mx-auto md:whitespace-nowrap text-center",children:"No Results Found For Given Category"})),f&&f.pages.length>=1&&e.jsx("div",{id:"observer",ref:s}),e.jsx(x,{})]}):e.jsx(m,{message:"Invalid Category"})};export{v as default};
