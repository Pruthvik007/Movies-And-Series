import{j as e,M as p,C as x,r as u,a as h,u as N,B as v,b,Q as j,c as C}from"./index-vDcMo-XS.js";import{u as S,a as w,b as _}from"./TmdbQueries-dh1AQ9Ye.js";import{u as E}from"./useFilters-Dn4ojSsN.js";import{W as R,I as y,M as I,S as V}from"./MediaList-CLHUDK_3.js";const k="/movies-and-series/assets/play-DEuCVnC0.png",g=({name:t,id:a,type:n="VIDEO",mediaType:r="movies"})=>{const s=(n==="VIDEO"?x.YOUTUBE_VIDEO_URL:r==="movies"?x.VIDSRC_MOVIE_URL:x.VIDSRC_SHOW_URL)+a;return e.jsxs("div",{children:[e.jsx(p.Header,{children:e.jsx("h3",{className:"text-xl font-semibold text",children:t})}),e.jsxs(p.Body,{children:[a.length>0&&e.jsx("iframe",{className:"w-full h-80",src:s,allowFullScreen:!0}),a.length===0&&e.jsx("p",{className:"text-xl font-bold text-red-500 text-center",children:"Video Not Available"})]})]})},W=({mediaType:t,id:a})=>{const{openModal:n}=u.useContext(h),r=()=>{n(e.jsx(g,{name:"Watch At VidSrc",id:a.toString(),type:"MEDIA",mediaType:t}))};return N("Enter",r),e.jsx("button",{onClick:r,className:"custom-btn-primary",children:t==="movies"?"Watch Movie":"Watch Show"})},L=({color:t})=>e.jsx("svg",{className:`w-4 h-4 ms-1 ${t}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 22 20",children:e.jsx("path",{d:"M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"})}),B=({actualRating:t,totalRating:a,displayText:n})=>e.jsxs("div",{className:"flex items-center flex-wrap gap-1 max-w-fit",children:[e.jsx("div",{className:"flex",children:Array.from({length:a}).map((r,s)=>e.jsx(L,{color:s<Math.floor(t)?"text-yellow-300":"text-gray-300 dark:text-gray-500"},s))}),n&&e.jsx("p",{className:"text-sm ms-1",children:n})]}),A=({mediaType:t,mediaId:a})=>{const{isLoading:n,error:r,data:s}=S(t,a),{openModal:o}=u.useContext(h),c=w(t,a),l=()=>{let i={name:"",id:""};if(c.isSuccess){const m=c.data.results.sort((d,M)=>d.name.localeCompare(M.name)).find(d=>d.official&&d.site==="YouTube"&&d.type==="Trailer"&&d.name.toLowerCase().includes("trailer"));m&&(i={name:m.name,id:m.key})}o(e.jsx(g,{...i}))};return N(" ",l),e.jsxs("div",{children:[n&&e.jsx(v,{}),r!==null&&e.jsx("p",{className:"text-3xl text-red-500",children:"Something Went Wrong!"}),s&&e.jsxs("div",{className:"rounded-lg shadow flex flex-col items-center md:flex-row gap-5 text-center md:text-left justify-center p-5 bg-base-100",children:[e.jsx(U,{mediaDetails:s}),e.jsxs("div",{className:"flex flex-col gap-3 bg-neutral p-3 rounded-xl w-full md:w-2/3 lg:w-full",children:[e.jsx(O,{mediaDetails:s,mediaType:t}),s.tagline&&s.tagline.length>0&&e.jsxs("p",{className:"text-md md:text-lg italic font-semibold text",children:['"',s.tagline,'"']}),e.jsx("div",{className:"text-lg md:text-xl italic font-semibold text",children:e.jsx("p",{children:s.overview})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 justify-center items-center md:justify-start",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"custom-btn-primary",children:"Watch Trailer"}),e.jsx(W,{mediaType:t,id:s.id})]}),e.jsx(R,{mediaDetails:s,mediaType:t})]}),e.jsx(f,{mediaType:t,data:s.genres,type:"Genres"}),e.jsx(f,{data:s.production_companies,type:"Production Companies",mediaType:t})]})]})]})},O=({mediaDetails:t,mediaType:a})=>{const n=a==="movies"?t.original_title:t.original_name,r=a==="movies"?t.release_date:t.first_air_date;return e.jsxs("p",{className:"text-3xl text-white",children:[n," (",r.split("-")[0],")"]})},f=({data:t,type:a,mediaType:n})=>{const{updateFilters:r,clearFilters:s}=E(),o=b(),c=l=>{s();const i=a==="Genres"?j.WITH_GENRES:j.WITH_COMPANIES;r(i,l.id.toString(),l.name),o(`${x.ENV.BASE_URL}media/${n}/discover`)};return e.jsxs("div",{className:"flex flex-col items-center md:flex-row bg-base-100 rounded-xl py-2 px-4 gap-x-2",children:[e.jsx("p",{className:"text-lg text whitespace-nowrap",children:a}),e.jsx("div",{className:"flex rounded-md shadow-sm gap-2 p-2 overflow-x-auto max-w-full",role:"group",children:t.map(l=>e.jsx("button",{className:"btn btn-sm md:btn-md btn-active btn-info",onClick:()=>c(l),children:l.name},l.id))})]})},U=({mediaDetails:t})=>e.jsxs("div",{className:"flex flex-col items-center gap-y-5",children:[e.jsx(y,{imagePath:t==null?void 0:t.poster_path,alt:t==null?void 0:t.id.toString(),loading:"eager",className:"card-lg"}),e.jsx(B,{actualRating:Number((t.vote_average/2).toFixed(1)),totalRating:5,displayText:`${t.vote_average.toFixed(1)} / 10`})]}),F=({mediaType:t,mediaId:a})=>{const{isLoading:n,error:r,data:s}=_(t,a);if(!r)return e.jsxs("div",{className:"bg-neutral rounded-xl p-3",children:[e.jsx("p",{className:"text-3xl font-bold text-white font-sans py-2",children:"Recommendations"}),r!==null&&e.jsx("p",{className:"text-3xl text-red-500",children:"Something Went Wrong!"}),s&&s.results.length===0&&e.jsx("p",{className:"text-3xl text-red-500 text-center",children:"No Recommendations Found!"}),s&&s.results.length>0&&e.jsxs("div",{className:"flex gap-3 scrollbar-hidden",children:[e.jsx(I,{mediaList:s.results,mediaType:t}),n&&e.jsx(V,{count:20,className:"card-sm md:card-md lg:card-lg flex-shrink-0"})]})]})},P=()=>{const t=b();return e.jsx("button",{onClick:()=>t(-1),className:"btn hover:btn-primary btn-neutral btn-sm lg:btn-md text-white font-bold py-2 px-4 rounded fixed right-5 bottom-5",children:"Back"})},T=({mediaType:t,mediaId:a})=>{const{openModal:n}=u.useContext(h),{isLoading:r,error:s,data:o}=w(t,a),c=l=>{const i={name:l.name,id:l.key};n(e.jsx(g,{...i}))};return e.jsxs("div",{className:"bg-neutral rounded-xl p-3 shadow",children:[e.jsx("p",{className:"text-3xl font-bold text-white font-sans py-4",children:"Videos"}),r&&e.jsx(v,{}),s!==null&&e.jsx("p",{className:"text-3xl text-red-500",children:"Something Went Wrong!"}),o&&o.results.length===0&&e.jsx("p",{className:"text-3xl text-red-500 text-center",children:"No Videos Found!"}),o&&e.jsx("div",{className:"flex gap-3 overflow-x-auto",children:o.results.map(l=>e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>c(l),children:[e.jsx(y,{alt:l.name,imagePath:l.key,imageType:"YOUTUBE_THUMBNAIL",loading:"lazy",className:"card-horizontal-sm md:card-horizontal-md lg:card-horizontal-lg rounded-xl overflow-y-clip"}),e.jsx("img",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-5 h-5 md:w-8 md:h-8 lg:w-10 lg:h-10",src:k,alt:"play"})]},l.key))})]})},$=()=>{const{id:t,mediaType:a}=C();return e.jsxs("div",{className:"flex flex-col gap-5 p-3",children:[e.jsx(A,{mediaId:t,mediaType:a}),e.jsx(T,{mediaId:t,mediaType:a}),e.jsx(F,{mediaId:t,mediaType:a}),e.jsx(P,{})]})};export{$ as default};
